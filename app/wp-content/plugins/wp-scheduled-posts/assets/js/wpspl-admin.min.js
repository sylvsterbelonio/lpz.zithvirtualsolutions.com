(()=>{"use strict";function t(){return t=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(t[i]=s[i])}return t},t.apply(this,arguments)}const{Button:e}=wp.components,{Component:s,createElement:i}=wp.element,h=class extends s{constructor(t){super(t),this.handleChange=this.handleChange.bind(this),this.state={isChecked:!1,isClicked:!1}}handleChange(t){if("clicked"===t)return t='{"date" : "'+this.props.currentTime.date+'", "date_gmt" : "'+this.props.currentTime.date_gmt+'", "status" : "publish"}',this.setState({isClicked:!0}),this.setState({isChecked:!1}),this.props.editPost(t),void this.props.savePost()}render(){return this.props.isScheduled&&!this.props.isPublished?i(e,{isPrimary:!0,onClick:()=>{this.handleChange("clicked")}},this.props.publish):null}},{Button:r}=wp.components,{Component:n,createElement:o}=wp.element,a=class extends n{constructor(t){super(t),this.handleChange=this.handleChange.bind(this),this.state={isChecked:!1,isClicked:!1,prevent_future_post:!1}}handleChange(t){if("clicked"===t)return this.setState({isClicked:!0}),this.setState({isChecked:!1}),this.setState({prevent_future_post:!0}),t='{"status" : "publish"}',this.props.editPost(t),this.props.setMetaValue({prevent_future_post:!0,date_type:"future"}),void this.props.savePost()}render(){return this.props.isScheduled&&!this.props.isPublished?o(r,{isPrimary:!0,onClick:()=>{this.handleChange("clicked")}},this.props.publish):null}},{compose:l,ifCondition:p,withInstanceId:u}=wp.compose,{withSelect:d,withDispatch:c}=wp.data,{PluginPostStatusInfo:m}=wp.editPost,{Component:b,createElement:C,useState:P}=wp.element,{CheckboxControl:g}=wp.components,{publishImmediately:w,publishFutureDate:f,currentTime:y,publish_button_off:S,allowedPostTypes:v}=WPSchedulePostsFree,k=l([d((t=>{const{getCurrentPostType:e,getEditedPostAttribute:s,isCurrentPostScheduled:i,isCurrentPostPublished:h,getCurrentPost:r}=t("core/editor");return{postType:e(),meta:s("meta"),isScheduled:i(),isPublished:h(),post:r()}})),c(((t,e)=>{let{meta:s}=e;const{editPost:i,savePost:h}=t("core/editor");return{editPost(t){var e=JSON.parse(t);"string"==typeof e&&(e=JSON.parse(e)),i({date:e.date,date_gmt:e.date_gmt,status:e.status})},setMetaValue:function(t){i({meta:t})},savePost:h}})),p((t=>{let{postType:e}=t;return v.includes(e),!0}))])(class extends b{constructor(t){super(t),this.handleChange=this.handleChange.bind(this),this.state={showHelp:!1,publishImmediately:!1}}handleChange(t){}render(){return""==S||!this.props.isScheduled||this.props.isPublished?"":C(m,null,C("div",{className:"sc-publish-future"},C("div",null,C(g,{label:"Publish future post immediately",checked:this.state.publishImmediately,onChange:t=>{this.setState({publishImmediately:t}),0==t&&this.setState({showHelp:!1})}}),C("a",{id:"wpscp-future-post-help-handler",className:"dashicons dashicons-info",href:"javascript:void();",title:"Show/Hide Help",onClick:()=>{this.setState({showHelp:!this.state.showHelp})}})),this.state.publishImmediately&&C("div",{className:"sc-publish-future-buttons"},C(h,t({},this.props,{currentTime:y,publish:w})),C(a,t({},this.props,{currentTime:y,publish:f}))),this.state.showHelp&&C("div",{style:{marginTop:5,color:"#757575"}},"If you choose to publish this future post with the Future Date, it will be published immediately but the postâ€™s date time will not set the current date rather it will be your scheduled future date time.")))}}),{registerPlugin:_}=wp.plugins;_("wps-publish-button",{render:k})})();